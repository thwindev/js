<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise</title>
</head>

<body>
</body>
<script>
    const posts = [{
        title: "Post One",
        body: "This is post one",
    }, {
        title: "Post Two",
        body: "This is post two",
    }];

    function getPosts() {

        setTimeout(() => {

            let output = '';
            posts.forEach((post) => {
                output += `<li>${ post.title }</li>`;
            });
            document.body.innerHTML = output;
        }, 1000);
    }

    function creatPosts(post) {
        // return promise
        return new Promise((resolve, reject) => {
            setTimeout(() => {
                posts.push(post);

                const error = false;

                if (!error) {
                    resolve(); // success => getPosts = then
                } else {
                    reject('Error!'); // fail
                }
            }, 3000);
        });
    }

    // class promise function => if success .then(resolve) OR fail .catch(error => {cs(error)})
    // creatPosts({
    //         title: "Post Three",
    //         body: "This is post Three",
    //     })
    //     .then(getPosts) // resolve()
    //     .catch(err => console.log(err)); // reject()



    // Async / Await
    // async function init() {
    //     await creatPosts({
    //         title: "Post Three",
    //         body: "This is post Three",
    //     });
    //     getPosts();
    // }

    // init();


    // Async / Await / Fetch
    async function fetchUsers() {
        const res = await fetch('https://fakestoreapi.com/products');
        const data = await res.json();

        console.log(data);
    }

    fetchUsers();

    // Promise.all
    // const promise1 = Promise.resolve('Hello World');
    // const promise2 = 10;
    // const promise3 = new Promise((resolve, reject) => setTimeout(resolve, 2000, 'GoodBye!'));
    // //just testing
    // const promise4 = fetch('https://fakestoreapi.com/products').then(resolve => resolve.json());

    // Promise.all([promise1, promise2, promise3, promise4]).then((values) => console.log(values));
</script>

</html>